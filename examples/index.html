<html>
	<head>
		<meta charset="utf-8">
		<title>demo</title>
	</head>
	<body>
		<div id="app">
			<a href="#/app">app</a>
			<a href="#/app/detail/1">detail</a>
			<a href="#/app/search">search</a>
		</div>

		<script type="text/javascript" src="../dist/unfancy-router.js"></script>
		<script type="text/javascript">
			const router = unfancyRouter( {
				debug: true,
			} )

			// r.beforeEach() {
			//
			// };
			// r.afterEach() {
			//
			// };
			// r.notfound() {
			// go( 'detail', {
			// 	query: {},
			// 	params: {}
			// } )
			// };

			const app = router.create( {
				path: '/app',
				beforeEnter( { next } ) {
					console.log( '/app beforeEnter' );
					next();
				},
				enter() {
					console.log( '/app enter' );
				},
				update() {
					console.log( '/app update' );
					return new Promise( function ( resolve ) {
						setTimeout(function () {
							resolve()
						}, 1000);
					} );
				},
				beforeLeave( { next } ) {
					console.log( '/app beforeLeave' );
					next();
				},
			} )

			const detail = router.create( {
				path: '/detail/:id',
				beforeEnter( { next } ) {
					console.log( '/detail beforeEnter' );
					next( function () {
						console.log( '/detail enter by next' );
					} )
				},
				enter() {
					console.log( '/detail enter' );
				},
				update() {
					console.log( '/detail update' );
				},
				leave() {
					console.log( '/detail leave' )
				},
				beforeLeave( { next } ) {
					console.log( '/detail beforeLeave' );
					next();
				},
			} )

			const search = router.create( {
				path: '/search',
				beforeEnter( { next } ) {
					console.log( '/search beforeEnter' );
					return new Promise( function (resolve) {
						setTimeout(function () {
							resolve();
						}, 1000);
					} )
				},
				enter() {
					return new Promise( function (resolve) {
						setTimeout(function () {
							console.log( '/search enter' );
							resolve();
						}, 1000);
					} )
				},
				update() {
					console.log( '/search update' );
				},
				beforeLeave( { next } ) {
					console.log( '/search beforeLeave' );
					next();
				},
			} )

			app.append( detail )
			app.append( search )

			// 每个路由节点都是独立体系，拥有完整方法，可以独立启动

			app.start()
			// app.stop()
		</script>
	</body>
</html>
